<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<meta charset="UTF-8" />
<head th:replace="/Fragment/resources_css :: css_resources">

</head>
<style>
#chartdivBarre {
	width: 100%;
	height: 500px;
	font-size: 11px;
}
#chartdivCourbe {
	width	: 100%;
	height	: 500px;
}
</style>
<!-- END HEAD -->

<body
	class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">
	<div class="modal fade" id="modalforemptylist" tabindex="-1"
		role="basic" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-hidden="true"></button>
					<h4 class="modal-title">Information</h4>
				</div>
				<div class="modal-body">


					<div class="portlet-body">Vous n'avez pas de consommations
						pour ce contrat!</div>



				</div>
				<div class="modal-footer">
					<button type="button" class="btn  btn-outline btn-circle"
						data-dismiss="modal"
						style="background-color: #ffdb4d; color: white;">Fermer</button>
				</div>
			</div>
		</div>
	</div>
	<a id="modalConsommation" data-toggle="modal" href="#modalforemptylist"></a>
	<!-- BEGIN HEADER -->
	<div th:include="/Fragment/header :: entete"></div>

	<!-- END HEADER -->
	<!-- BEGIN HEADER & CONTENT DIVIDER -->
	<div class="clearfix"></div>
	<!-- END HEADER & CONTENT DIVIDER -->
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<!-- BEGIN SIDEBAR -->
		<div th:include="/Fragment/menu :: menu"></div>
		<!-- END SIDEBAR -->
		<!-- BEGIN CONTENT -->
		<div class="page-content-wrapper">
			<!-- BEGIN CONTENT BODY -->
			<div class="page-content">
				<!-- BEGIN PAGE HEADER-->

				<h3 class="page-title">Espace Client</h3>
				<div class="page-bar">
					<ul class="page-breadcrumb">
						<li><i class="icon-home"></i> <a href="index.html">Acceuil</a>
							<i class="fa fa-angle-right"></i></li>
						<li><a href="#">Liste Consommation</a> <i
							class="fa fa-angle-right"></i></li>

					</ul>

				</div>
				<!-- END PAGE HEADER-->
				<div class="tab-pane active" id="tab_0">
					<div class="portlet box green">
						<div class="portlet-title" style="background-color: #3b5998;">
							<div class="caption">
								<i class="fa fa-gift"></i>Mes Consommations
							</div>
							<div class="tools">
								<a href="javascript:;" class="collapse"> </a> <a
									href="#portlet-config" data-toggle="modal" class="config">
								</a> <a href="javascript:;" class="reload"> </a> <a
									href="javascript:;" class="remove"> </a>
							</div>
						</div>
						<div class="portlet-body form">
							<!-- BEGIN FORM-->
							<form action="#" class="form-horizontal"
								th:action="@{/Consommation/FiltreListes}" method="post"
								th:object="${consommation}">
								<div class="form-body">
									<div class="form-group">
										<label class="col-md-4 control-label">Choisir votre
											Contrat </label>
										<div class="col-md-4">
											<select th:field="*{contrat.id}"
												class="form-control input-circle">
												<option th:each="contrat : ${contrats}"
													th:value="${contrat.id}"
													th:text="${contrat.numero +'-' +contrat.service}"></option>
											</select>

										</div>
									</div>
									<div class="form-actions">
										<div class="row">
											<div class="col-md-offset-4 col-md-9">
												<button type="submit" class="btn btn-circle "
													style="background-color: #3b5998; color: white;">Valider</button>
												<button type="button"
													class="btn btn-circle grey-salsa btn-outline">Annuler</button>
											</div>
										</div>
									</div>
								</div>
							</form>
							<!-- END FORM-->
						</div>
					</div>
				</div>
				<div class="portlet-body form">
					<div class="tab-content">
						<div class="tab-pane active" id="portlet_tab_1_1">
							<div class="skin skin-minimal">
								<form role="form">
									<div class="form-body">
										<div class="form-group">

											<div class="input-group">
												<!-- 												<div class="icheck-inline"> -->
												<!-- 													<label>Visualiser mon historique</label> -->
												<!-- 													 <label> <input type="radio" name="radio1"  -->
												<!-- 													 class="icheck" -->
												<!-- 														data-radio="iradio_square-grey" th:value="courbe" /> -->
												<!-- 														Courbe -->
												<!-- 													</label>  -->
												<!-- 													<label> <input type="radio" name="radio1" -->
												<!-- 														class="icheck" data-radio="iradio_square-grey" -->
												<!-- 														th:value="barre" /> Barre -->
												<!-- 													</label> -->
												<!-- 													<div class="form-actions "> -->
												<!-- 														<a data-toggle="modal" href="#static"> -->
												<!-- 															<button type="submit" class="btn btn-circle  " -->
												<!-- 																style="margin-left: 100px; background-color: #3b5998; color: white;">Voir</button> -->
												<!-- 														</a> -->
												<!-- 													</div> -->

												<!-- 												</div> -->
												<table>
													<tbody>
														<tr>
															<td class="form-actions " style="padding-right: 20px;">Visualiser mon
																historique</td>

															<td class="form-actions " style="padding-right: 20px;"><label> <input id="courbe"
																	type="radio" value="courbe" name="radio1" class="icheck"
																	data-radio="iradio_square-grey"/>
																	Courbe
															</label></td>
															<td class="form-actions " style="padding-right: 10px;"><label> <input id="barre"
																	type="radio" value="barre" name="radio1" class="icheck"
																	data-radio="iradio_square-grey" />
																	Barre
															</label></td>
															<td><div class="form-actions ">
																		<button id="voirGraphe" type="button" class="btn btn-circle  "
																			style="margin-left: 100px; background-color: #3b5998; color: white;">Voir</button>
																</div>
															</td>
																
														</tr>

													</tbody>
												</table>
												
											</div>
										</div>
									</div>

								</form>

								<div id="staticBarre" class="modal fade" tabindex="-1"
									data-backdrop="static" data-keyboard="false">
									<div class="modal-dialog" >
										<div class="modal-content" >
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal"
													aria-hidden="true"></button>
												<h4 class="modal-title">Barre : Votre historique de
													consommation</h4>
											</div>
											<div class="modal-body">
												<div id="chartdivBarre"></div>
											</div>

<!-- 											<div class="modal-footer"> -->
<!-- 												<button type="button" class="btn  btn-outline btn-circle" -->
<!-- 													data-dismiss="modal" -->
<!-- 													style="background-color: #ffdb4d; color: white;">Fermer</button> -->
<!-- 											</div> -->
										</div>
									</div>
								</div>
								<a data-toggle="modal" href="#staticBarre" id="modalBarre"></a>
								<div id="staticCourbe" class="modal fade" tabindex="-1"
									data-backdrop="static" data-keyboard="false">
									<div class="modal-dialog" >
										<div class="modal-content" >
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal"
													aria-hidden="true"></button>
												<h4 class="modal-title">courbe : Votre historique de
													consommation</h4>
											</div>
											<div class="modal-body">
												<div id="chartdivCourbe"></div>
											</div>

<!-- 											<div class="modal-footer"> -->
<!-- 												<button type="button" class="btn  btn-outline btn-circle" -->
<!-- 													data-dismiss="modal" -->
<!-- 													style="background-color: #ffdb4d; color: white;">Fermer</button> -->
<!-- 											</div> -->
										</div>
									</div>
								</div>
								
							</div>
						</div>
						<a data-toggle="modal" href="#staticCourbe" id="modalCourbe"></a>
								
						<div class="portlet box green"
							th:if="${consommations != null and consommations.size() &gt; 0}">
							<div class="portlet-title" style="background-color: #3b5998;">
								<div class="caption">
									<i class="fa fa-cogs"></i>Liste Consommations
								</div>
								<div class="tools">
									<a href="javascript:;" class="collapse"> </a> <a
										href="#portlet-config" data-toggle="modal" class="config">
									</a> <a href="javascript:;" class="reload"> </a> <a
										href="javascript:;" class="remove"> </a>
								</div>
							</div>
							<div class="portlet-body">
								<div class="table-scrollable">
									<table class="table table-striped table-bordered table-hover">
										<thead>
											<tr>
												<th>Période</th>
												<th>Date de la relève</th>

												<th>Type lecture</th>
												<th>Nombre de jours</th>

												<th>Index lu</th>
												<th>Volume Consommé</th>
												<th>Volume Facturé</th>

											</tr>
										</thead>
										<tbody>
											<tr th:each="consommation : ${consommations}">
												<td th:text="${consommation.periode}"></td>
												<td th:text="${consommation.dateS}"></td>
												<td th:text="${consommation.type_lec}"></td>
												<td th:text="${consommation.nbr_jour}"></td>
												<td th:text="${consommation.index_lu}"></td>
												<td th:text="${consommation.volume_consomme}"></td>
												<td th:text="${consommation.volume_facture}"></td>




											</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
						<!-- END SAMPLE TABLE PORTLET-->
					</div>
				</div>
			</div>
			<!-- END CONTENT BODY -->

			<!-- END CONTAINER -->
			<!-- BEGIN FOOTER -->
			<div th:include="/Fragment/footer:: footer"></div>

			<!-- END FOOTER -->
			<!--[if lt IE 9]>
<script src="resources/assets/global/plugins/respond.min.js"></script>
<script src="resources/assets/global/plugins/excanvas.min.js"></script> 
<![endif]-->
			<div th:include="/Fragment/resources_js :: js_resources"></div>
			<script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
			<script src="https://www.amcharts.com/lib/3/serial.js"></script>
			<script
				src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
			<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
			<script src="http://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js" type="text/javascript"></script>
			
		</div>
	</div>
	<script th:inline="javascript">
	/*<![CDATA[*/
		
		
	
		
		
		
	var chart = AmCharts.makeChart( "chartdivBarre", {
			  "type": "serial",
			  "theme": "light",
			  "dataProvider": [ {
			    "country": "USA",
			    "visits": 2025
			  }, {
			    "country": "China",
			    "visits": 1882
			  }, {
			    "country": "Japan",
			    "visits": 1809
			  }, {
			    "country": "Germany",
			    "visits": 1322
			  }, {
			    "country": "UK",
			    "visits": 1122
			  }, {
			    "country": "France",
			    "visits": 1114
			  }, {
			    "country": "India",
			    "visits": 984
			  }, {
			    "country": "Spain",
			    "visits": 711
			  }, {
			    "country": "Netherlands",
			    "visits": 665
			  }, {
			    "country": "Russia",
			    "visits": 580
			  }, {
			    "country": "South Korea",
			    "visits": 443
			  }, {
			    "country": "Canada",
			    "visits": 441
			  }, {
			    "country": "Brazil",
			    "visits": 395
			  } ],
			  "valueAxes": [ {
			    "gridColor": "#FFFFFF",
			    
			    "gridAlpha": 0.2,
			    "dashLength": 0
			  } ],
			  "gridAboveGraphs": true,
			  "startDuration": 1,
			  "graphs": [ {
			    "balloonText": "[[category]]: <b>[[value]]</b>",
			    "fillAlphas": 0.8,
			    "lineAlpha": 0.2,
			    "type": "column",
			    "valueField": "visits"
			  } ],
			  "chartCursor": {
			    "categoryBalloonEnabled": false,
			    "cursorAlpha": 0,
			    "zoomable": false
			  },
			  "categoryField": "country",
			  "categoryAxis": {
			    "gridPosition": "start",
			    "gridAlpha": 0,
			    "tickPosition": "start",
			    "tickLength": 20
			  },
			  "export": {
				  "enabled": true,
				}
			} );
			
		 
		 var chart = AmCharts.makeChart("chartdivCourbe", {
			    "type": "serial",
			    "theme": "light",
			    "marginTop":0,
			    "marginRight": 80,
			    "dataProvider": [{
			        "year": "1950",
			        "value": -0.307
			    }, {
			        "year": "1951",
			        "value": -0.168
			    }, {
			        "year": "1952",
			        "value": -0.073
			    }, {
			        "year": "1953",
			        "value": -0.027
			    }, {
			        "year": "1954",
			        "value": -0.251
			    }, {
			        "year": "1955",
			        "value": -0.281
			    }, {
			        "year": "1956",
			        "value": -0.348
			    }, {
			        "year": "1957",
			        "value": -0.074
			    }, {
			        "year": "1958",
			        "value": -0.011
			    }, {
			        "year": "1959",
			        "value": -0.074
			    }, {
			        "year": "1960",
			        "value": -0.124
			    }, {
			        "year": "1961",
			        "value": -0.024
			    }, {
			        "year": "1962",
			        "value": -0.022
			    }, {
			        "year": "1963",
			        "value": 0
			    }, {
			        "year": "1964",
			        "value": -0.296
			    }, {
			        "year": "1965",
			        "value": -0.217
			    }, {
			        "year": "1966",
			        "value": -0.147
			    }, {
			        "year": "1967",
			        "value": -0.15
			    }, {
			        "year": "1968",
			        "value": -0.16
			    }, {
			        "year": "1969",
			        "value": -0.011
			    }, {
			        "year": "1970",
			        "value": -0.068
			    }, {
			        "year": "1971",
			        "value": -0.19
			    }, {
			        "year": "1972",
			        "value": -0.056
			    }, {
			        "year": "1973",
			        "value": 0.077
			    }, {
			        "year": "1974",
			        "value": -0.213
			    }, {
			        "year": "1975",
			        "value": -0.17
			    }, {
			        "year": "1976",
			        "value": -0.254
			    }, {
			        "year": "1977",
			        "value": 0.019
			    }, {
			        "year": "1978",
			        "value": -0.063
			    }, {
			        "year": "1979",
			        "value": 0.05
			    }, {
			        "year": "1980",
			        "value": 0.077
			    }, {
			        "year": "1981",
			        "value": 0.12
			    }, {
			        "year": "1982",
			        "value": 0.011
			    }, {
			        "year": "1983",
			        "value": 0.177
			    }, {
			        "year": "1984",
			        "value": -0.021
			    }, {
			        "year": "1985",
			        "value": -0.037
			    }, {
			        "year": "1986",
			        "value": 0.03
			    }, {
			        "year": "1987",
			        "value": 0.179
			    }, {
			        "year": "1988",
			        "value": 0.18
			    }, {
			        "year": "1989",
			        "value": 0.104
			    }, {
			        "year": "1990",
			        "value": 0.255
			    }, {
			        "year": "1991",
			        "value": 0.21
			    }, {
			        "year": "1992",
			        "value": 0.065
			    }, {
			        "year": "1993",
			        "value": 0.11
			    }, {
			        "year": "1994",
			        "value": 0.172
			    }, {
			        "year": "1995",
			        "value": 0.269
			    }, {
			        "year": "1996",
			        "value": 0.141
			    }, {
			        "year": "1997",
			        "value": 0.353
			    }, {
			        "year": "1998",
			        "value": 0.548
			    }, {
			        "year": "1999",
			        "value": 0.298
			    }, {
			        "year": "2000",
			        "value": 0.267
			    }, {
			        "year": "2001",
			        "value": 0.411
			    }, {
			        "year": "2002",
			        "value": 0.462
			    }, {
			        "year": "2003",
			        "value": 0.47
			    }, {
			        "year": "2004",
			        "value": 0.445
			    }, {
			        "year": "2005",
			        "value": 0.47
			    }],
			    "valueAxes": [{
			        "axisAlpha": 0,
			        "position": "left"
			    }],
			    "graphs": [{
			        "id":"g1",
			        "balloonText": "[[category]]<br><b><span style='font-size:14px;'>[[value]]</span></b>",
			        "bullet": "round",
			        "bulletSize": 8,
			        "lineColor": "#d1655d",
			        "lineThickness": 2,
			        "negativeLineColor": "#637bb6",
			        "type": "smoothedLine",
			        "valueField": "value"
			    }],
			    "chartScrollbar": {
			        "graph":"g1",
			        "gridAlpha":0,
			        "color":"#888888",
			        "scrollbarHeight":55,
			        "backgroundAlpha":0,
			        "selectedBackgroundAlpha":0.1,
			        "selectedBackgroundColor":"#888888",
			        "graphFillAlpha":0,
			        "autoGridCount":true,
			        "selectedGraphFillAlpha":0,
			        "graphLineAlpha":0.2,
			        "graphLineColor":"#c2c2c2",
			        "selectedGraphLineColor":"#888888",
			        "selectedGraphLineAlpha":1

			    },
			    "chartCursor": {
			        "categoryBalloonDateFormat": "YYYY",
			        "cursorAlpha": 0,
			        "valueLineEnabled":true,
			        "valueLineBalloonEnabled":true,
			        "valueLineAlpha":0.5,
			        "fullWidth":true
			    },
			    "dataDateFormat": "YYYY",
			    "categoryField": "year",
			    "categoryAxis": {
			        "minPeriod": "YYYY",
			        "parseDates": true,
			        "minorGridAlpha": 0.1,
			        "minorGridEnabled": true
			    },
			    "export": {
			        "enabled": true
			    }
			});

	
	
		
		
		
		
		
		
		
	
		
	$("#modalConsommation").hide();
	$("#modalBarre").hide();
	$("#modalCourbe").hide();
	
	empty = /*[[${emptyConsommation}]]*/;
	if (empty) {
    	$("#modalConsommation").click();
	}
	 
	$("#voirGraphe").click(function() {
		if($(".icheck:checked").val()== "barre"){
			$("#modalBarre").click();
		}
		if($(".icheck:checked").val()== "courbe"){
			$("#modalCourbe").click();
		}
	});
	 /*]]>*/
	 </script>
	 <script type="text/javascript">
	 
		 
	
	 
	</script>
</body>

</html>